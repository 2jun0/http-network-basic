# HTTP와 연계하는 웹서버

### 가상 호스트

- 물리적으로는 서버가 1대지만 가상으로 여러대가 있는 것처럼 설정하는 것이 가능.
- 같은 IP주소에서 다른 호스트명과 도메인명을 가진 여러 개의 웹사이트가 실행될 수 있게 해줌
- 구분 방법
  (1) HTT Request를 보내는 경우 호스트명과 도메인명을 완전하게 포함한 URI지정.
  (2) Host헤더 필드에서 지정.

<br>
<br>

### 통신을 중계하는 프로그램

: 클라이언트와 서버 이외에 통신을 중계하는 친구들.

1. 프록시

   - 클라이언트-서버 사이에서 데이터를 전달해주는 서버. 웹 캐시 기능이 있는 경우가 많음.
     (방식에 따라 클라이언트의 IP주소가 서버에게 노출됨)
   - 클라이언트로부터 받은 Request를 다른 서버에 전송.
   - 클라이언트로부터 받은 Request URI를 변경하지 않음.
   - 프록시 서버를 경유할 때마다 Via 헤더필드에 정보 추가.
   - 프록시 서버 사용 이유
     - 인터넷 속도 향상에 도움이 되는 경우가 존재. (캐시 저장 가능)
     - 보안. (서버 IP 숨기기 가능)
     - 우회.
   - 프록시 사용 방법
     1. 캐싱 프록시 : 서버 상에 리소스 캐시를 보존해두는 타입. (response 중계할 때)

        같은 리소스에 대한 요청일 경우, 오리진 서버로부터 리소스를 얻는 것이 아니라 캐시로부터 얻음.

     2. 투명 프록시 : 중계 시 요청/응답메시지 변경을 하지 않는 타입.
     3. 비투과 프록시 : 요청/응답메시지에 변경을 가하는 타입.

   +) 오리진 서버 : 리소스 본체를 가진 서버.

1. 게이트웨이

   - 프록시와 동작이 유사.
   - 다음에 있는 서버가 HTTP서버 이외의 서비스를 제공하는 서버임.
   - 클라이언트와 게이트웨이 사이를 암호화하여 안전하게 접속함. (안정성 높임)

1. 터널
   - 요구에 따라 다른 서버와의 통신 경로 확립. (?)
   - 클라이언트는 SSL같은 암호화 통신을 통해 서버와 안전하게 통신 가능.
   - 리퀘스트 그대로 다음 서버에 중계.
   - 통신하고 있는 양쪽 끝의 접속이 끊어질 때 터널도 종료함.
   - 터널 자체는 투명한 존재. 클라이언트는 터널을 의식할 필요 X.
     안전한 통신로 확립용.

<br>
<br>

### 캐시

- 캐시 : 프록시 서버와 클라이언트의 로컬 디스크에 보관된 리소스의 사본.
- 캐시를 사용하면 리소스를 가진 서버로의 액세스를 줄이는 것이 가능 → 통신 양/시간 절약
- 캐시 서버 : 프록시 서버의 하나. (== 캐싱 프록시)
  프록시가 서버로부터의 응답을 중계할 때 프록시 서버 상에 리소스의 사본이 등록됨.
- 장점 :
  - 같은 데이터는 가까운 서버로부터 얻을 수 있게 되어 오리진 서버는 동일한 응답을 매번 처리하지 않아도 됨.
  - 인터넷 서비스 속도가 높아짐.
- 주의 : 오리진 서버의 원래 리소스가 갱신되는 경우, 캐시 서버는 낡은 리소스를 보낼 수도 있음.
  클라이언트의 요구/캐시의 유효 기간에 따라 오리진 서버로 리소스의 유효성 확인/리소스 갱신하러 감.
- 클라이언트(브라우저)도 캐시를 가지고 있음.
  같은 데이터는 서버에 액세스하지 않고 로컬 디스크로부터 불러옴.
  리소스가 오래된 경우, 오리진 서버로 리소스의 유효성 확인/리소스 갱신하러 감.
